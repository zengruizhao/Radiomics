#ifndef __itkVectorImageToProbabilityImage_h
#define __itkVectorImageToProbabilityImage_h



/** This function will take in a Vector Image
  * and corresponding Gaussian Model and will
  * return an image where each pixel is the
  * probability as represented by the Gaussian
  * Model.
  */



////////////////////////////////////////////////////////////////////////////////////////////////////
#include "ccipdDisableWarningsMacro.h"
  #include <itkImageToImageFilter.h>
#include "ccipdEnableWarningsMacro.h"
////////////////////////////////////////////////////////////////////////////////////////////////////



namespace itk
{


/**
 * 
 * \author  Rachel Sparks
 * \ingroup Filtering
 */
template < class TInputImage, class TOutputImage,
           class TMembershipType >
class ITK_EXPORT VectorImageToProbabilityImage:
  public ImageToImageFilter < TInputImage, TOutputImage >
////////////////////////////////////////////////////////////////////////////////////////////////////
{

public:
////////////////////////////////////////////////////////////////////////////////////////////////////
  /** Standard class typedefs. */
  typedef VectorImageToProbabilityImage                          Self;
  typedef ImageToImageFilter < TInputImage, TOutputImage >       Superclass;
  typedef SmartPointer< Self >                                   Pointer;
  typedef SmartPointer< const Self >                             ConstPointer;
////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////
  typedef TInputImage                                            InputImageType;
  typedef typename InputImageType::PixelType                     InputPixelType;
  typedef TOutputImage                                           OutputImageType;
  typedef typename OutputImageType::PixelType                    OutputPixelType;
  typedef TMembershipType                                        MembershipType;
  typedef typename MembershipType::ConstPointer                  MembershipConstPointer;
  typedef typename Superclass::OutputImageRegionType             OutputImageRegionType;
////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////
  /** Method for creation through the object factory. */
  itkNewMacro(Self);

  /** Run-time type information (and related methods). */
  itkTypeMacro(VectorImageToProbabilityImage, ImageToImageFilter);
////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////
  itkSetConstObjectMacro( MembershipFunction, MembershipType );
  itkGetConstObjectMacro( MembershipFunction, MembershipType );
////////////////////////////////////////////////////////////////////////////////////////////////////



protected:
////////////////////////////////////////////////////////////////////////////////////////////////////
  VectorImageToProbabilityImage() {} //not implemented
  virtual ~VectorImageToProbabilityImage() {}// not implemented
  virtual void PrintSelf( std::ostream & os, Indent indent ) const;
////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////
  virtual void ThreadedGenerateData( const OutputImageRegionType & outputRegionForThread,
                             ThreadIdType threadId );
////////////////////////////////////////////////////////////////////////////////////////////////////



////////////////////////////////////////////////////////////////////////////////////////////////////
  MembershipConstPointer m_MembershipFunction;
////////////////////////////////////////////////////////////////////////////////////////////////////



private:
////////////////////////////////////////////////////////////////////////////////////////////////////
  VectorImageToProbabilityImage(const Self &); //purposely not implemented
  void operator=(const Self &);    //purposely not implemented
////////////////////////////////////////////////////////////////////////////////////////////////////



}; // class
} // namespace itk



////////////////////////////////////////////////////////////////////////////////////////////////////
#ifndef ITK_MANUAL_INSTANTIATION
#include "itkVectorImageToProbabilityImage.hxx"
#endif
////////////////////////////////////////////////////////////////////////////////////////////////////



  #endif // __itkVectorImageToProbabilityImage_h
